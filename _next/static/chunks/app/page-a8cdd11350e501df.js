(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6577:function(e,t,s){Promise.resolve().then(s.bind(s,6973))},6973:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var r=s(7437),a=s(2265),l=s(9158),i=s(1165),n=s(2126),o=()=>{let e=n.Z.create({headers:{"Content-Type":"application/json"}});return{request:(0,a.useCallback)(async t=>{try{return await e.request(t)}catch(e){if(n.Z.isAxiosError(e))throw console.error("Axios error:",e.message),e;throw console.error("Unexpected error:",e),Error("An unexpected error occurred")}},[e])}},c=()=>({encodeUrl:(0,a.useCallback)(e=>encodeURIComponent(e),[]),decodeUrl:(0,a.useCallback)(e=>decodeURIComponent(e),[])}),d=s(2141);let x=e=>e.replace(/(\b[a-z](?!\s))/g,e=>e.toUpperCase());var u=()=>({lookup:(0,a.useCallback)(e=>{let t=x(e);try{let e=d.byIso(t);if(e)return e.iso2}catch(e){}let s=d.byCountry(t);return(null==s?void 0:s.iso2)||e},[])});let p=(0,a.createContext)(void 0),h=e=>{let{children:t}=e,[s,l]=(0,a.useState)(null),[i,n]=(0,a.useState)(null),[d,x]=(0,a.useState)(!1),{lookup:h}=u(),{request:m}=o(),{encodeUrl:f}=c(),j=async(e,t)=>{if(d)return;let s={city:e,country:h(t),apiKey:"d33f229e0d4bba582908ff4fe9bcf750",units:"metric"};if(s.city&&s.country){x(!0),n(null);try{let e={...(await m({url:"https://api.openweathermap.org/data/2.5/weather?q=".concat(f(s.city),",").concat(f(s.country),"&appid=").concat(s.apiKey,"&&units=").concat(s.units)})).data,timestamp:Date.now()};l(e)}catch(e){n("An error occurred while fetching data"),console.error(e)}finally{x(!1)}}};return(0,r.jsx)(p.Provider,{value:{weather:s,setWeather:l,fetchWeather:j,error:i,setError:n,isLoading:d},children:t})},m=()=>{let e=(0,a.useContext)(p);if(void 0===e)throw Error("useGlobalState must be used within a WeatherProvider");return e},f=()=>{let[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)(""),{error:o,fetchWeather:c,isLoading:d}=m(),x=()=>{t(""),n("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-[20px] flex-col items-end desktop:flex-row desktop:items-center",children:[(0,r.jsx)("div",{className:"flex w-full desktop:flex-1",children:(0,r.jsx)(l.Y,{value:e,onChange:e=>t(e.target.value),label:"City",size:"sm"})}),(0,r.jsx)("div",{className:"flex w-full desktop:flex-1",children:(0,r.jsx)(l.Y,{value:s,onChange:e=>n(e.target.value),label:"Country",size:"sm"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.A,{size:"sm",color:"secondary",onClick:()=>c(e,s),isDisabled:""===e||""===s,isLoading:d,children:"search"}),(0,r.jsx)(i.A,{color:"secondary",size:"sm",onClick:()=>x(),isDisabled:!e&&!s,children:"clear"})]})]}),o&&(0,r.jsx)("div",{className:"border border-red-500 bg-red-200 text-red-800 px-2 py-1 rounded mt-4 desktop:mt-2",role:"alert",children:(0,r.jsx)("span",{className:"block sm:inline",children:"Not found."})})]})};var j=s(2737),v=s.n(j),b=s(1470),w=s.n(b);v().extend(w());var y=()=>({formatDate:(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY HH:mmA";return v()(e).format(t)},[]),fromNow:(0,a.useCallback)(e=>v()(e).fromNow(),[])}),k=s(6648);let g=(0,a.createContext)(void 0),N=e=>{let{children:t}=e,[s,l]=(0,a.useState)([]);return(0,r.jsx)(g.Provider,{value:{historyWeathers:s,setHistoryWeathers:l,removeHistoryWeather:e=>{l(s.filter(t=>t.timestamp!==e))}},children:t})},C=()=>{let e=(0,a.useContext)(g);if(void 0===e)throw Error("useGlobalState must be used within a HistoryProvider");return e};var z=s(4621),S=s(4642),E=s(3379);let H=e=>{let{weather:t,fetchWeather:s,removeWeatherHistory:a}=e,{formatDate:l}=y();return(0,r.jsxs)("div",{className:"h-[60px] rounded-2xl bg-history-weather-background flex justify-between gap-2 items-center w-full px-[10px]",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start desktop:flex-row desktop:items-center desktop:justify-between flex-1",children:[(0,r.jsxs)("div",{className:"flex",children:[t.name,", ",t.sys.country]}),(0,r.jsx)("div",{className:"text-history-action text-xs desktop:text-base",children:l(new Date(t.timestamp+t.timezone))})]}),(0,r.jsxs)("div",{className:"flex gap-2 text-history-action",children:[(0,r.jsx)(D,{icon:S.j,action:()=>s(t.name,t.sys.country)}),(0,r.jsx)(D,{icon:E.N,action:()=>a(t.timestamp)})]})]},t.id)},D=e=>{let{icon:t,action:s}=e;return(0,r.jsxs)("div",{className:"w-[34px] h-[34px] relative cursor-pointer",onClick:()=>s(),children:[(0,r.jsx)("div",{className:"w-[34px] h-[34px] left-0 top-0 absolute bg-history-action-background rounded-full shadow border-[1px] border-solid border-[var(--history-action-border-color)]"}),(0,r.jsx)(z.Z,{className:"w-4 h-4 left-[9px] top-[9px] absolute ",icon:t})]})},M=()=>{let{historyWeathers:e,setHistoryWeathers:t}=C(),{weather:s}=m();return(0,a.useEffect)(()=>{s&&t([...e,s])},[s]),(0,r.jsxs)("div",{className:"bg-history-background rounded-3xl text-sm desktop:text-base",children:[(0,r.jsx)("div",{className:"w-full m-[20px]",children:(0,r.jsx)("span",{children:"Search History"})}),e.length?(0,r.jsx)(A,{}):(0,r.jsx)(_,{})]})},_=()=>(0,r.jsx)("div",{className:"w-full min-h-[120px] desktop:min-h-[300px] flex justify-center items-center text-zinc-600 text-xs desktop:text-base",children:"No Record"}),A=()=>{let{historyWeathers:e,removeHistoryWeather:t}=C(),{fetchWeather:s}=m();return(0,r.jsx)("div",{className:"flex flex-col gap-[18px] ml-[17px] mr-[13px] pb-[100px] text-xs desktop:text-base",children:e.map(e=>(0,r.jsx)(H,{removeWeatherHistory:t,weather:e,fetchWeather:s},e.timestamp))})},U=()=>{let{error:e,weather:t}=m(),{formatDate:s}=y();return(0,r.jsxs)("div",{className:"flex flex-col gap-[20px] rounded-[20px] mt-[60px] p-[20px] bg-weather-details-background desktop:mt-[140px]",children:[!e&&t&&(0,r.jsxs)("div",{className:"flex flex-col relative",children:[(0,r.jsx)("div",{className:"text-xl desktop:text-2xl",children:t.weather[0].description}),(0,r.jsxs)("div",{className:"text-[48px]",children:[t.main.temp,"\xb0"]}),(0,r.jsx)("div",{className:"absolute top-[-50%] desktop:top-[-90%] right-0 w-[157px] h-[157px] desktop:w-[271px] desktop:h-[271px]",children:(0,r.jsx)(k.default,{alt:"Today's weather",fill:!0,src:"/images/".concat(t.weather[0].main.toLowerCase(),".png")})}),(0,r.jsxs)("div",{className:"flex justify-between items-end text-sm desktop:text-base text-weather-details",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsxs)("div",{children:["H: ",t.main.temp_max,"\xb0"]}),(0,r.jsxs)("div",{children:["L: ",t.main.temp_min,"\xb0"]})]}),(0,r.jsxs)("strong",{children:[t.name,", ",t.sys.country]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end desktop:flex-row desktop:justify-between desktop:flex-1",children:[(0,r.jsx)("div",{children:t.weather[0].main}),(0,r.jsxs)("div",{children:["Humidity: ",t.main.humidity,"%"]}),(0,r.jsx)("div",{children:s(new Date(t.timestamp+t.timezone))})]})]})]}),(0,r.jsx)(M,{})]})},Y=()=>(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(f,{}),(0,r.jsx)(U,{})]});var P=s(9512),W=s(9270);let I=e=>(0,r.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,r.jsxs)("g",{fill:"currentColor",children:[(0,r.jsx)("path",{d:"M19 12a7 7 0 11-7-7 7 7 0 017 7z"}),(0,r.jsx)("path",{d:"M12 22.96a.969.969 0 01-1-.96v-.08a1 1 0 012 0 1.038 1.038 0 01-1 1.04zm7.14-2.82a1.024 1.024 0 01-.71-.29l-.13-.13a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.984.984 0 01-.7.29zm-14.28 0a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a1 1 0 01-.7.29zM22 13h-.08a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zM2.08 13H2a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zm16.93-7.01a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a.984.984 0 01-.7.29zm-14.02 0a1.024 1.024 0 01-.71-.29l-.13-.14a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.97.97 0 01-.7.3zM12 3.04a.969.969 0 01-1-.96V2a1 1 0 012 0 1.038 1.038 0 01-1 1.04z"})]})}),L=e=>(0,r.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,r.jsx)("path",{d:"M21.53 15.93c-.16-.27-.61-.69-1.73-.49a8.46 8.46 0 01-1.88.13 8.409 8.409 0 01-5.91-2.82 8.068 8.068 0 01-1.44-8.66c.44-1.01.13-1.54-.09-1.76s-.77-.55-1.83-.11a10.318 10.318 0 00-6.32 10.21 10.475 10.475 0 007.04 8.99 10 10 0 002.89.55c.16.01.32.02.48.02a10.5 10.5 0 008.47-4.27c.67-.93.49-1.519.32-1.79z",fill:"currentColor"})}),q=()=>{let[e,t]=(0,a.useState)(!1),{theme:s,setTheme:l}=(0,P.F)();return((0,a.useEffect)(()=>{t(!0)},[]),e)?(0,r.jsx)(W.i,{size:"lg",color:"secondary",onValueChange:()=>{"light"===s?l("dark"):l("light")},thumbIcon:e=>{let{isSelected:t,className:s}=e;return t?(0,r.jsx)(I,{className:s}):(0,r.jsx)(L,{className:s})}}):null},R=()=>(0,r.jsxs)("div",{className:"flex justify-between h-[60px] desktop:h-[80px] items-center",children:[(0,r.jsx)("span",{className:"text-[24px] desktop:text-[28px]",children:(0,r.jsx)("strong",{children:"Today's Weather"})}),(0,r.jsx)(q,{})]});function T(){return(0,r.jsx)(h,{children:(0,r.jsx)(N,{children:(0,r.jsxs)("div",{className:"min-h-screen px-[15px] pb-[60px] desktop:p-0 flex flex-col text-text transition-colors duration-300 max-w-[700px] desktop:ml-auto desktop:mr-auto",children:[(0,r.jsx)(R,{}),(0,r.jsx)(Y,{})]})})})}}},function(e){e.O(0,[962,971,23,744],function(){return e(e.s=6577)}),_N_E=e.O()}]);